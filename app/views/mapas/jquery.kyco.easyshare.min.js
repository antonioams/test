/***************************************\

	jquery.kyco.easyshare
	=====================

	Version 1.1.2

	Brought to you by
	http://www.kycosoftware.com

	Copyright 2015 Cornelius Weidmann

	Distributed under the GPL

\***************************************/

var kyco=kyco||{};kyco.apiPath="../api/easyshare.php";
kyco.easyShare=function(){0<$("[data-easyshare]").length&&$("[data-easyshare]").each(function(a,c){var b=$(this),d=b.data("easyshare-url"),e="undefined"===typeof d||""===d?window.location.href:d,f=b.find("[data-easyshare-total-count]"),g=b.find('[data-easyshare-button-count="facebook"]'),h=b.find('[data-easyshare-button-count="twitter"]'),k=b.find('[data-easyshare-button-count="google"]'),l=b.find("[data-easyshare-loader]");$.ajax({url:kyco.apiPath,type:"GET",data:{url:e},dataType:"json",success:function(a){f.html(kyco.easyShareApproximate(a.Total));g.html(kyco.easyShareApproximate(a.Facebook));h.html(kyco.easyShareApproximate(a.Twitter));k.html(kyco.easyShareApproximate(a.Google));l.fadeOut(500)},error:function(){f.html(0);g.html(0);h.html(0);k.html(0);l.fadeOut(500)}});b.find('[data-easyshare-button="facebook"]').click(function(){var a=($(window).width()-500)/2,b=($(window).height()-400)/2;window.open("https://www.facebook.com/sharer/sharer.php?u="+e,"facebook","width=500,height=400,top="+b+",left="+a)});b.find('[data-easyshare-button="twitter"]').click(function(){var a=$(this).data("easyshare-tweet-text")||"",b=($(window).width()-575)/2,c=($(window).height()-440)/2,a="http://twitter.com/share?text="+encodeURIComponent(a);window.open(a,"twitter","status=1,width=575,height=440,top="+c+",left="+b)});b.find('[data-easyshare-button="google"]').click(function(){var a=($(window).width()-500)/2,b=($(window).height()-400)/2;window.open("https://plus.google.com/share?url="+e,"google+","width=500,height=400,top="+b+",left="+a)})})};kyco.easyShareAddCommas=function(a){var c=[],b=Math.round(a).toString().split("");if(1E3>a)return a.toString();b.reverse().forEach(function(a,b){b&&0===b%3&&c.push(",");c.push(a)});return c.reverse().join("")};kyco.easyShareFormatDecimals=function(a,c){var b=a/c;return 10>b?Math.round(10*b)/10:Math.round(b)};kyco.easyShareApproximate=function(a){var c=0>a;c&&(a=Math.abs(a));a=1E4>a?kyco.easyShareAddCommas(a):1E6>a?kyco.easyShareFormatDecimals(a,1E3)+"k":1E9>a?kyco.easyShareFormatDecimals(a,1E6)+"m":kyco.easyShareAddCommas(kyco.easyShareFormatDecimals(a,1E9))+"b";c&&(a="-"+a);return a};$(document).ready(function(){kyco.easyShare()});
